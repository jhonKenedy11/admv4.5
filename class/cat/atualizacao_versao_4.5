########################### 25/ABRIL/2025 ##################################### JHON


########### Processo prazo de entrega ###########

1- Transformar valores vazios em null para conversao:              
UPDATE CAT_ATENDIMENTO
SET PRAZOENTREGA = NULL
WHERE TRIM(PRAZOENTREGA) = '';

2- Alterar o tipo do campo:
ALTER TABLE CAT_ATENDIMENTO
MODIFY COLUMN PRAZOENTREGA DATETIME NULL;



########## Inclusao da coluna COLOR no amb_usuario #############

ALTER TABLE AMB_USUARIO
ADD COLUMN USER_COLOR VARCHAR(15) DEFAULT NULL;



########################### 28/ABRIL/2025 ##################################### JHON

incluir as bibliotecas atualizados do daterangepicker do cliente para atualizacoes

########################### 30/ABRIL/2025 ##################################### JHON

ALTER TABLE CAT_ATENDIMENTO
ADD COLUMN PEDIDO_ID INT DEFAULT NULL AFTER CAT_TIPO_ID;



######################## 05/MAIO/2025 ################################## JHON

ALTER TABLE CAT_AT_SERVICOS 
ADD QUANTIDADE_EXECUTADA decimal(9,2) NULL AFTER QUANTIDADE


######################## 21/MAIO/2025 ################################# Joshua
mudança na forma de formar a equipe, sem ser por equipamento vinculado.



CREATE TABLE `AMB_EQUIPE` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(100) NOT NULL,
  `COR_EQUIPE` varchar(50) NOT NULL COMMENT 'COR DE IDENTIFICAÇÃO DA EQUIPE',
  `CREATED_USER` int NOT NULL COMMENT 'USUÁRIO QUE CRIOU O REGISTRO',
  `UPDATED_USER` int DEFAULT NULL COMMENT 'USUÁRIO QUE ATUALIZOU O REGISTRO',
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'DATA DE CRIAÇÃO',
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'DATA DE ATUALIZAÇÃO',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `UK_AMB_EQUIPE_DESCRICAO` (`DESCRICAO`)
);

-- CAT_AT_EQUIPE_USUARIO definição

CREATE TABLE `CAT_AT_EQUIPE_USUARIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_EQUIPE` int NOT NULL,
  `ID_USUARIO` int NOT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CREATED_USER` int NOT NULL COMMENT 'USUÁRIO QUE CRIOU O REGISTRO',
  `UPDATED_USER` int DEFAULT NULL COMMENT 'USUÁRIO QUE ATUALIZOU O REGISTRO',
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'DATA DE CRIAÇÃO',
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'DATA DE ATUALIZAÇÃO',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `UK_AT_EQUIPE_USUARIO_ATENDIMENTO` (`ID_EQUIPE`,`ID_USUARIO`,`CAT_ATENDIMENTO_ID`),
  KEY `CAT_ATENDIMENTO_ID` (`CAT_ATENDIMENTO_ID`),
  CONSTRAINT `CAT_AT_EQUIPE_USUARIO_ibfk_1` FOREIGN KEY (`ID_EQUIPE`) REFERENCES `AMB_EQUIPE` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `CAT_AT_EQUIPE_USUARIO_ibfk_2` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`) ON DELETE CASCADE
);

ALTER TABLE CAT_ATENDIMENTO 
ADD COLUMN EQUIPE_ID INT NULL AFTER CAT_EQUIPAMENTO_ID

######################## 04/JUNHO/2025 ################################# Joshua

AJUSTAR DATAABERATEND EM CAT_ATENDIMENTO, REMOVER O PADRAO.

ALTER TABLE CAT_ATENDIMENTO MODIFY COLUMN DATAABERATEND timestamp NOT NULL;