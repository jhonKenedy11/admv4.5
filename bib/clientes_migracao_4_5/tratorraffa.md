Sql Tratorraffa

Ajustar biblioteca datarangepicker.
adicionar a pasta em css, js e a linha abaixo no header.tpl
<link href="css/daterangepicker/daterangepicker.css" rel="stylesheet">


biblioteca local/cliente do sweet alert na pasta js, e adicionar no config.
define( "ADMsweetAlert2", ADMhttpCliente . '/../sweetalert2');

pedidos menuopen
<li><a href="index.php?mod=ped&form=pedido_venda_telhas_dash">Dashboard</a></li>
<li><a href="index.php?mod=ped&form=pedido_ps">Pedido Venda</a></li>
<li><a href="index.php?mod=est&form=produto&opcao=pesquisarpecasmenu">Consulta preços</a></li>

<li><a href="index.php?mod=ped&form=pedido_venda_gerente_novo">Gerencia Pedido</a></li>
<li><a href="index.php?mod=ped&form=pedido_venda_motivo">Motivo</a></li>
<li><a href="index.php?mod=ped&form=pedido_relatorios">Relatórios</a></li>

########### CRM ##################

***ENDERECO ENTREGA *****
CREATE TABLE `FIN_CLIENTE_ENDERECO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `CLIENTE` int NOT NULL,
  `DESCRICAO` varchar(35) NOT NULL,
  `TIPOEND` varchar(15) DEFAULT 'RUA',
  `TITULOEND` varchar(15) DEFAULT NULL,
  `ENDERECO` varchar(60) DEFAULT 'SEM ENDERECO',
  `NUMERO` varchar(7) DEFAULT 'S/N',
  `COMPLEMENTO` varchar(15) DEFAULT NULL,
  `BAIRRO` varchar(20) DEFAULT NULL,
  `CIDADE` varchar(40) DEFAULT 'SEM CIDADE',
  `UF` varchar(2) DEFAULT 'PR',
  `CEP` int DEFAULT NULL,
  `HORARIO` time DEFAULT NULL,
  `FONEAREA` varchar(4) DEFAULT NULL,
  `FONE` varchar(9) DEFAULT NULL,
  `FONERAMAL` varchar(4) DEFAULT NULL,
  `FONECONTATO` varchar(15) DEFAULT NULL,
  `ENDENTREGAPADRAO` char(1) DEFAULT 'N',
  `ENDRETIRADAPADRAO` char(1) DEFAULT 'N',
  `PAIS` varchar(3) DEFAULT NULL,
  `STATUS` char(1) DEFAULT 'A',
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1142 DEFAULT CHARSET=latin1;

*** OBRA *****
CREATE TABLE `FIN_CLIENTE_OBRA` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `CNO` varchar(20) DEFAULT '0',
  `PROJETO` varchar(90) DEFAULT '0',
  `RESPONSAVEL_TECNICO` int DEFAULT '0',
  `CREA` varchar(20) DEFAULT NULL,
  `ART` varchar(20) DEFAULT NULL,
  `CLIENTE` int NOT NULL,
  `STATUS` char(1) NOT NULL DEFAULT 'A' COMMENT 'A-Ativo, I-Inativo',
  `USERINSERT` int DEFAULT NULL,
  `DATEINSERT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `USERCHANGE` int DEFAULT NULL,
  `DATECHANGE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb3;

*** GED ****
CREATE TABLE `AMB_GED` (
  `id` int NOT NULL AUTO_INCREMENT,
  `table` varchar(60) NOT NULL,
  `table_id` varchar(100) DEFAULT NULL,
  `path` varchar(100) NOT NULL,
  `destaque` varchar(60) DEFAULT NULL,
  `user_insert` int DEFAULT NULL,
  `user_change` int DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb3;

############ PEDIDO #############

**** OBRA ****
ALTER TABLE FAT_PEDIDO 
ADD COLUMN OBRA_ID INT DEFAULT NULL AFTER OS;

**** MARCA ****
CREATE TABLE `EST_MARCA` (
  `MARCA` varchar(9) NOT NULL,
  `DESCRICAO` varchar(30) NOT NULL,
  PRIMARY KEY (`MARCA`)
);

ALTER TABLE EST_PRODUTO 
ADD MARCA varchar(9) NULL AFTER GRUPO;

**** DUPLICA PEDIDO *****
ALTER TABLE FAT_PEDIDO
ADD VOLMARCA varchar(45) DEFAULT NULL AFTER VOLPESOLIQ;

CREATE TABLE `AMB_LOG` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_TABLE` int NOT NULL,
  `OPERACAO` varchar(10) COLLATE utf8mb3_bin DEFAULT NULL,
  `TABELA` varchar(20) COLLATE utf8mb3_bin DEFAULT NULL,
  `SQLSAVE` text COLLATE utf8mb3_bin,
  `USERINSERT` int DEFAULT NULL,
  `DATEINSERT` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1052329 DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_bin;

*** nf *****
APÓS OS PASSOS ABAIXO BATEU NO ASSINCRONO EM HOMOLOGACAO.

1- desativar o sql mode para poder alterar as colunas:
$ SET @@SESSION.sql_mode = REPLACE(@@SESSION.sql_mode, 'STRICT_TRANS_TABLES', '');

2- Executar:
$ ALTER TABLE EST_NOTA_FISCAL MODIFY COLUMN DATASAIDAENTRADA timestamp DEFAULT '2020-01-01 01:00:00' NULL;
$ ALTER TABLE EST_NOTA_FISCAL MODIFY COLUMN DATACONFERENCIA timestamp DEFAULT '2020-01-01 01:00:00' NULL;

2- Incluir a coluna:
$ ALTER TABLE EST_NOTA_FISCAL 
ADD VENDAPRESENCIAL CHAR(1) DEFAULT 'N';

4- Voltar o padrao:
$ SET @@SESSION.sql_mode = 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

ALTER TABLE EST_NAT_OP
ADD `PRECCREDITOSIMPLES` decimal(5,2) NOT NULL AFTER TRIBSIMPLES;

incluir se não houver.
ALTER TABLE EST_NAT_OP_TRIBUTO 
ADD `PRODUTO` varchar(25) DEFAULT NULL AFTER CEST;

****** produto ************
CREATE TABLE `AMB_IMAGEM` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_DOC` int NOT NULL,
  `MODULO` varchar(3) DEFAULT NULL,
  `DESTAQUE` char(1) DEFAULT NULL,
  `EXTENSAO` varchar(10) DEFAULT NULL,
  `USERINSERT` int DEFAULT NULL,
  `CREATED_AT` datetime DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1;


******** INVENTARIO **********
CREATE TABLE `EST_INVENTARIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `REFERENCIA` varchar(20) DEFAULT NULL,
  `CODIGOPRODUTO` int DEFAULT NULL,
  `CENTROCUSTO` int NOT NULL,
  `QUANTIDADE` decimal(9,4) DEFAULT NULL,
  `QUANTANTERIOR` decimal(9,4) DEFAULT NULL,
  `PRECOCUSTONOVO` decimal(9,2) DEFAULT NULL,
  `PRECOCUSTO` decimal(9,2) DEFAULT NULL,
  `USUARIO` smallint DEFAULT NULL,
  `PROJETO` varchar(50) DEFAULT NULL,
  `STATUS` char(1) DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
)
CREATE TABLE `EST_INVENTARIO_PRODUTO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `INVENTARIOID` int DEFAULT NULL,
  `CODPRODUTO` int DEFAULT NULL,
  `QUANTIDADENOVA` decimal(9,2) DEFAULT NULL,
  `QUANTIDADEANTERIOR` decimal(9,2) DEFAULT NULL,
  `PRECOCUSTOANTERIOR` decimal(9,2) DEFAULT NULL,
  `PRECOCUSTONOVO` decimal(9,2) DEFAULT NULL,
  `TIPOMOVIMENTO` char(1) DEFAULT NULL,
  `QUANTIDADEMOVIMENTADA` decimal(9,2) DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT NULL,
  `UPDATED_AT` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`ID`)
)

CREATE TABLE `EST_PRODUTO_REPARO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `PRODUTO_REPARO` int NOT NULL,
  `PRODUTO_ID` int NOT NULL,
  `QUANT` int DEFAULT NULL,
  `USERINSERT` int DEFAULT NULL,
  `DATEINSERT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `USERCHANGE` int DEFAULT NULL,
  `DATECHANGE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `CODREPARO` (`PRODUTO_REPARO`,`PRODUTO_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb3;

ALTER TABLE FAT_PEDIDO 
ADD `CENTROCUSTOENTREGA` int DEFAULT NULL

DROPA A ATUAL SE NÃO TIVER INFORMAÇÕES


CREATE TABLE `CAT_EQUIPAMENTO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(60) NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=383 DEFAULT CHARSET=utf8mb3;

CREATE TABLE `CAT_SITUACAO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(50) NOT NULL,
  `ATIVO` char(1) DEFAULT 'S',
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb3;


CREATE TABLE `CAT_ACESSORIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(50) NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;


CREATE TABLE `CAT_AT_EQUIPE` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `EQUIPE_EQUIPAMENTO_ID` int NOT NULL,
  `CAT_USUARIO_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;



CREATE TABLE `CAT_AT_TAREFAS` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ATENDIMENTO_ID` int DEFAULT NULL,
  `SERVICO_ID` int DEFAULT NULL,
  `USER_ID` int DEFAULT NULL,
  `DATA_INICIO` timestamp NULL DEFAULT NULL,
  `DATA_FIM` timestamp NULL DEFAULT NULL,
  `TOTALHORAS` varchar(45) DEFAULT NULL,
  `DESCRICAO` varchar(50) DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` datetime DEFAULT NULL,
  `UPDATED_AT` datetime DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



CREATE TABLE `CAT_CONTRATO` (
  `NRCONTRATO` varchar(10) NOT NULL,
  `CLIENTE` int NOT NULL,
  `DATAASSINA` date DEFAULT NULL,
  `DATAVENC` date DEFAULT NULL,
  `TIPOCONTRATO` int DEFAULT NULL,
  `DATAENCERRAMENTO` date DEFAULT NULL,
  `VALOR` decimal(9,2) DEFAULT NULL,
  `DESCRICAO` varchar(50) DEFAULT NULL,
  `SITUACAO` char(1) NOT NULL DEFAULT 'N',
  `DATAULTIMOFATURAMENTO` date DEFAULT NULL,
  `DIAFATURAMENTO` int DEFAULT NULL,
  `NUMHORAS` int DEFAULT NULL,
  `SLA` int DEFAULT NULL,
  `SERVICOBALCAO` int DEFAULT NULL,
  `SERVICOPVISITA` int DEFAULT NULL,
  `SERVICOSVISITA` int DEFAULT NULL,
  `SERVICOTVISITA` int DEFAULT NULL,
  `SERVICOQVISITA` int DEFAULT NULL,
  `SERVICOIVISITA` int DEFAULT NULL,
  `SERVICOKM` int DEFAULT NULL,
  `SITAGATEND` int DEFAULT NULL,
  `SLAAGATEND` int DEFAULT NULL,
  `SITPECAREC` int DEFAULT NULL,
  `SLAPECAREC` int DEFAULT NULL,
  `NUMEQUIPAMENTO` int DEFAULT NULL,
  `OBS` text,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  PRIMARY KEY (`NRCONTRATO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;


CREATE TABLE `CAT_DEFEITO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(60) NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;





CREATE TABLE `CAT_PARAMETROS` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `SITUACAOINCLUSAO` int DEFAULT NULL,
  `SITAGATENDIMENTO` int DEFAULT NULL,
  `SITEMATENDIMENTO` int DEFAULT NULL,
  `SITSOLICITARPECA` int DEFAULT NULL,
  `SITAGPECA` int DEFAULT NULL,
  `SITPECARECEBIDA` int DEFAULT NULL,
  `SITAPORCAMENTO` int DEFAULT NULL,
  `SITFINALIZADO` int DEFAULT NULL,
  `LOCALATENDIMENTO` char(1) DEFAULT NULL,
  `TIPOINTERVENCAO` char(1) DEFAULT NULL,
  `MSGATENDIMENTO` text,
  `MSGORCAMENTO` text,
  `CONTROLEESTOQUE` int DEFAULT NULL,
  `TIPODOCCOBRANCA` int DEFAULT NULL,
  `CONDPGTO` varchar(100) DEFAULT NULL,
  `CONTA` smallint DEFAULT NULL,
  `GENERO` varchar(4) DEFAULT NULL,
  `CENTROCUSTO` int DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb3;



CREATE TABLE `CAT_SERVICO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(60) NOT NULL,
  `UNIDADE` varchar(3) NOT NULL,
  `QUANTIDADE` decimal(6,2) DEFAULT NULL,
  `VALORUNITARIO` decimal(8,2) NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=775 DEFAULT CHARSET=utf8mb3;


CREATE TABLE `CAT_TIPO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(50) NOT NULL,
  `GARANTIA` char(1) NOT NULL DEFAULT 'N',
  `COBSERVICO` char(1) NOT NULL DEFAULT 'N',
  `COBPECAS` char(1) NOT NULL DEFAULT 'N',
  `COBDESPESAS` char(1) NOT NULL DEFAULT 'N',
  `COBTIPOPRECO` char(1) DEFAULT NULL COMMENT 'V - Preco Venda / C - Preco Custo',
  `DIASGARANTIAPECAS` int DEFAULT NULL,
  `DIASGARANTIASERVICO` int DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb3;




CREATE TABLE `CAT_ATENDIMENTO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `NUMATENDIMENTO` int DEFAULT NULL,
  `CLIENTE` int NOT NULL,
  `CONTATO` varchar(30) DEFAULT NULL,
  `DATAABERATEND` datetime NOT NULL,
  `DATAFECHATEND` datetime DEFAULT NULL,
  `USRABERTURA` smallint DEFAULT NULL,
  `PRIORIDADE` char(1) DEFAULT 'N',
  `PRAZOENTREGA` datetime DEFAULT NULL,
  `DESCEQUIPAMENTO` varchar(60) DEFAULT NULL,
  `KMENTRADA` varchar(20) DEFAULT NULL,
  `OBS` text,
  `OBSSERVICO` text,
  `SOLUCAO` text,
  `VALORSERVICOS` decimal(12,2) DEFAULT NULL,
  `VALORPECAS` decimal(12,2) DEFAULT NULL,
  `VALORUTILIZADOPECAS` float DEFAULT NULL,
  `TOTALUTILIZADOPECAS` float DEFAULT NULL,
  `VALORVISITA` decimal(12,2) DEFAULT NULL,
  `VALORDESCONTO` decimal(12,2) DEFAULT NULL,
  `VALORTOTAL` decimal(12,2) DEFAULT NULL,
  `TIPOCOBRANCA` char(1) DEFAULT NULL,
  `CONDPGTO` varchar(100) DEFAULT NULL,
  `CONTA` smallint DEFAULT NULL,
  `GENERO` varchar(4) DEFAULT NULL,
  `CENTROCUSTO` int DEFAULT NULL,
  `CAT_SITUACAO_ID` int NOT NULL,
  `CAT_EQUIPAMENTO_ID` int DEFAULT NULL,
  `EQUIPE_ID` int DEFAULT NULL,
  `CAT_TIPO_ID` int NOT NULL,
  `PEDIDO_ID` int DEFAULT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `fk_CAT_ATENDIMENTO_CAT_SITUACAO_idx` (`CAT_SITUACAO_ID`),
  KEY `fk_CAT_ATENDIMENTO_CAT_TIPO1_idx` (`CAT_TIPO_ID`),
  KEY `fk_CAT_ATENDIMENTO_CAT_EQUIPAMENTO1` (`CAT_EQUIPAMENTO_ID`),
  CONSTRAINT `fk_CAT_ATENDIMENTO_CAT_EQUIPAMENTO1` FOREIGN KEY (`CAT_EQUIPAMENTO_ID`) REFERENCES `CAT_EQUIPAMENTO` (`ID`),
  CONSTRAINT `fk_CAT_ATENDIMENTO_CAT_SITUACAO` FOREIGN KEY (`CAT_SITUACAO_ID`) REFERENCES `CAT_SITUACAO` (`ID`),
  CONSTRAINT `fk_CAT_ATENDIMENTO_CAT_TIPO1` FOREIGN KEY (`CAT_TIPO_ID`) REFERENCES `CAT_TIPO` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3611 DEFAULT CHARSET=utf8mb3;

CREATE TABLE `CAT_AT_ACESSORIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(50) DEFAULT NULL,
  `QUANTIDADE` int DEFAULT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CAT_ACESSORIO_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `fk_CAT_AT_ACESSORIO_CAT_ATENDIMENTO1_idx` (`CAT_ATENDIMENTO_ID`),
  KEY `fk_CAT_AT_ACESSORIO_CAT_ACESSORIO1_idx` (`CAT_ACESSORIO_ID`),
  CONSTRAINT `fk_CAT_AT_ACESSORIO_CAT_ACESSORIO1` FOREIGN KEY (`CAT_ACESSORIO_ID`) REFERENCES `CAT_ACESSORIO` (`ID`),
  CONSTRAINT `fk_CAT_AT_ACESSORIO_CAT_ATENDIMENTO1` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;



CREATE TABLE `CAT_AT_ACESSORIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(50) DEFAULT NULL,
  `QUANTIDADE` int DEFAULT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CAT_ACESSORIO_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `fk_CAT_AT_ACESSORIO_CAT_ATENDIMENTO1_idx` (`CAT_ATENDIMENTO_ID`),
  KEY `fk_CAT_AT_ACESSORIO_CAT_ACESSORIO1_idx` (`CAT_ACESSORIO_ID`),
  CONSTRAINT `fk_CAT_AT_ACESSORIO_CAT_ACESSORIO1` FOREIGN KEY (`CAT_ACESSORIO_ID`) REFERENCES `CAT_ACESSORIO` (`ID`),
  CONSTRAINT `fk_CAT_AT_ACESSORIO_CAT_ATENDIMENTO1` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;



CREATE TABLE `CAT_AT_DEFEITO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(60) NOT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CAT_DEFEITO_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `fk_CAT_AT_DEFEITO_CAT_ATENDIMENTO1_idx` (`CAT_ATENDIMENTO_ID`),
  KEY `fk_CAT_AT_DEFEITO_CAT_DEFEITO1_idx` (`CAT_DEFEITO_ID`),
  CONSTRAINT `fk_CAT_AT_DEFEITO_CAT_ATENDIMENTO1` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`),
  CONSTRAINT `fk_CAT_AT_DEFEITO_CAT_DEFEITO1` FOREIGN KEY (`CAT_DEFEITO_ID`) REFERENCES `CAT_DEFEITO` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;



CREATE TABLE `AMB_EQUIPE` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `DESCRICAO` varchar(100) NOT NULL,
  `COR_EQUIPE` varchar(50) NOT NULL COMMENT 'COR DE IDENTIFICAÇÃO DA EQUIPE',
  `CREATED_USER` int NOT NULL COMMENT 'USUÁRIO QUE CRIOU O REGISTRO',
  `UPDATED_USER` int DEFAULT NULL COMMENT 'USUÁRIO QUE ATUALIZOU O REGISTRO',
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'DATA DE CRIAÇÃO',
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'DATA DE ATUALIZAÇÃO',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `UK_AMB_EQUIPE_DESCRICAO` (`DESCRICAO`)
)
CREATE TABLE `CAT_AT_EQUIPE_USUARIO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_EQUIPE` int NOT NULL,
  `ID_USUARIO` int NOT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CREATED_USER` int NOT NULL COMMENT 'USUÁRIO QUE CRIOU O REGISTRO',
  `UPDATED_USER` int DEFAULT NULL COMMENT 'USUÁRIO QUE ATUALIZOU O REGISTRO',
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'DATA DE CRIAÇÃO',
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'DATA DE ATUALIZAÇÃO',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `UK_AT_EQUIPE_USUARIO_ATENDIMENTO` (`ID_EQUIPE`,`ID_USUARIO`,`CAT_ATENDIMENTO_ID`),
  KEY `CAT_ATENDIMENTO_ID` (`CAT_ATENDIMENTO_ID`),
  CONSTRAINT `CAT_AT_EQUIPE_USUARIO_ibfk_1` FOREIGN KEY (`ID_EQUIPE`) REFERENCES `AMB_EQUIPE` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `CAT_AT_EQUIPE_USUARIO_ibfk_2` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=140 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;



CREATE TABLE `CAT_AT_SERVICOS` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_USER` int NOT NULL,
  `DATA` date DEFAULT NULL,
  `HORAINI` time DEFAULT NULL,
  `HORAFIM` time DEFAULT NULL,
  `HORATOTAL` time DEFAULT NULL,
  `CUSTOUSER` decimal(9,2) DEFAULT NULL,
  `DESCSERVICO` text,
  `UNIDADE` varchar(3) DEFAULT NULL,
  `QUANTIDADE` decimal(9,2) DEFAULT NULL,
  `QUANTIDADE_EXECUTADA` decimal(9,2) DEFAULT NULL,
  `VALUNITARIO` decimal(9,2) DEFAULT NULL,
  `TOTALSERVICO` decimal(9,2) DEFAULT NULL,
  `CAT_ATENDIMENTO_ID` int NOT NULL,
  `CAT_SERVICOS_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `fk_CAT_AT_SERVICOS_CAT_ATENDIMENTO1_idx` (`CAT_ATENDIMENTO_ID`),
  KEY `fk_CAT_AT_SERVICOS_CAT_SERVICOS1_idx` (`CAT_SERVICOS_ID`),
  CONSTRAINT `fk_CAT_AT_SERVICOS_CAT_ATENDIMENTO1` FOREIGN KEY (`CAT_ATENDIMENTO_ID`) REFERENCES `CAT_ATENDIMENTO` (`ID`),
  CONSTRAINT `fk_CAT_AT_SERVICOS_CAT_SERVICOS1` FOREIGN KEY (`CAT_SERVICOS_ID`) REFERENCES `CAT_SERVICO` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4101 DEFAULT CHARSET=utf8mb3;


CREATE TABLE `FAT_PEDIDO_SERVICO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `FAT_PEDIDO_ID` int NOT NULL,
  `ID_USER` int NOT NULL,
  `DATA` date DEFAULT NULL,
  `HORAINI` time DEFAULT NULL,
  `HORAFIM` time DEFAULT NULL,
  `HORATOTAL` time DEFAULT NULL,
  `CUSTOUSER` decimal(9,2) DEFAULT NULL,
  `DESCSERVICO` text,
  `UNIDADE` varchar(3) DEFAULT NULL,
  `QUANTIDADE` decimal(9,2) DEFAULT NULL,
  `VALUNITARIO` decimal(9,2) DEFAULT NULL,
  `TOTALSERVICO` decimal(9,2) DEFAULT NULL,
  `CAT_SERVICOS_ID` int NOT NULL,
  `CREATED_USER` int DEFAULT NULL,
  `UPDATED_USER` int DEFAULT NULL,
  `CREATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `UPDATED_AT` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `QTD_CONTRATADA` decimal(9,2) DEFAULT NULL,
  `QTD_EXECUTADA` decimal(9,2) DEFAULT NULL,
  `QTD_PENDENTE` decimal(9,2) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `fk_FAT_PEDIDO_SERVICO_FAT_PEDIDO1_idx` (`FAT_PEDIDO_ID`),
  KEY `fk_FAT_PEDIDO_SERVICO_CAT_SERVICOS1_idx` (`CAT_SERVICOS_ID`),
  CONSTRAINT `fk_FAT_PEDIDO_SERVICO_CAT_SERVICOS1` FOREIGN KEY (`CAT_SERVICOS_ID`) REFERENCES `CAT_SERVICO` (`ID`),
  CONSTRAINT `fk_FAT_PEDIDO_SERVICO_FAT_PEDIDO1` FOREIGN KEY (`FAT_PEDIDO_ID`) REFERENCES `FAT_PEDIDO` (`ID`)
)